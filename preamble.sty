%closs platform solution for typesetting japanese
\input iftex.sty


\ifxetex
% FOR XETEX
    % \documentclass[a4paper,japanese]{scrartcl}
    \documentclass[a4paper,japanese]{jlreq}
    \usepackage{xeCJK}
    \usepackage{zxjatype}
    \xeCJKsetup{AutoFallBack=true}
    % \setCJKmainfont{HaranoAjiMincho} \setCJKsansfont{HaranoAjiGothic} \setCJKmonofont{IPAMincho} \setmainfont{HaranoAjiMincho}


\else
\ifptex
% FOR pLaTeX
    % \documentclass[dvipdfmx,a4paper,japanese]{scrartcl}
    \documentclass[dvipdfmx,a4paper,japanese]{jlreq}


\else
\ifluatex
% FOR LuaLaTeX
    % \documentclass[a4paper,japanese]{scrartcl}
    \documentclass[a4paper,japanese]{jlreq}
    \usepackage{luatexja}
    \usepackage[haranoaji]{luatexja-preset}


\fi
\fi
\fi

% Document Class Settings %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ModifyHeading{section}{font=\normalfont}

% begin usual preamble %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{ar}
\usepackage{amsmath}
\usepackage{booktabs}
\usepackage{bookmark}

\usepackage[japanese]{babel}

\usepackage{eso-pic}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{here}
\usepackage{hyperref}
% \usepackage{subfiles}
\usepackage{siunitx}
\usepackage{tablefootnote}

\usepackage{comment}
\usepackage{tcolorbox}
\usepackage{csvsimple}
% \usepackage{cite}
\usepackage{cleveref}

%\usepackage{caption}
%\usepackage{lipsum}
%\usepackage{longtable}
%\usepackage{lscape}
%\usepackage{multicol}
%\usepackage{pgfplotstable}
% \usepackage{smartref}
\usepackage{todonotes}
%\usepackage{wrapfig}




% uncomment this to hide all figures and tables
\begin{comment}
\excludecomment{figure}
\let\endfigure\relax
\excludecomment{table}
\let\endtable\relax
\excludecomment{longtable}
\let\endlongtable\relax
\end{comment}




% packages I created personally
\usepackage{my}
% \usepackage{mysets}
% \usepackage{myinlinetodo}


% % for babel and SIunitx
% % stopped working recently
% \ExplSyntaxOn
% \providetranslation[to = japanese]{ to~(numerical~range) }{から}
% \ExplSyntaxOff


% \usepackage{listings}
% \lstset{
%     language={C++},
%     basicstyle={\small},
%     frame={tb},
%     texcl={false},
%     breaklines={true},
%     numbers=left
% }

% Biblatex Settings %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[style=numeric-comp, sorting=none, urldate=iso]{biblatex}
\DeclareLanguageMapping{japanese}{english}
\DeclareFieldFormat{urldate}{#1\bibstring{urlseen}}
\DefineBibliographyStrings{japanese}{urlseen={閲覧},}
\DefineBibliographyStrings{japanese}{references={参考文献},}
\AtEveryBibitem{\clearlist{language}}

\DeclareSourcemap{
  \maps[datatype=bibtex]{
    \map{
      \pernottype{misc} % only if type is not misc
      \step[fieldset=urldate, null] % delete field
      \step[fieldset=url, null] % delete field
    }
  }
}

\addbibresource{mybib.bib}
